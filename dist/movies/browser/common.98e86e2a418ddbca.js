"use strict";(self.webpackChunkmovies=self.webpackChunkmovies||[]).push([["common"],{5527:(I,f,s)=>{s.d(f,{H:()=>O});var e=s(1562),L=s(6917),l=s(1134),c=s(2223),h=s(3144);const E=[L.w,"discover","movie"].join("/");function m(p){const{with_cast:v,with_genres:u,...D}=p,M={...(0,e.K)(D),...(0,l.C)(D)};return v&&(M.with_cast=v),u&&(M.with_genres=u),M}let O=(()=>{class p{constructor(){this.http=(0,c.f3M)(h.eN),this.getDiscoverMovies=(u={})=>this.http.get(E,{params:m(u)})}}return p.\u0275fac=function(u){return new(u||p)},p.\u0275prov=c.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},5062:(I,f,s)=>{s.d(f,{XC:()=>P});var e=s(2223),L=s(5766),l=s(6424),c=s(4004),h=s(1365),E=s(3900),m=s(8675),O=s(4463),p=s(57),v=s(6436),u=s(6459),D=s(5088),M=s(6586);let P=(()=>{class i extends L.x{constructor(){super(),this.listState=(0,e.f3M)(v.V),this.routerState=(0,e.f3M)(u.u),this.ui=(new p.AE).create(),this.routerListId$=this.routerState.select((0,c.U)(t=>t?.type)),this.listInfoUpdateEvent$=this.ui.listInfoUpdate$.pipe((0,h.M)(this.select("id"))),this.listPosterUpdateEvent$=this.ui.listPosterUpdate$.pipe((0,h.M)(this.select("id"))),this.listDeleteEvent$=this.ui.deleteList$.pipe((0,h.M)(this.select("id"))),this.listDetails$=this.select("id").pipe((0,E.w)(t=>this.listState.select("lists",t))),this.movies$=this.listDetails$.pipe((0,l.Ys)("results"),(0,c.U)(t=>void 0!==t?t.map(r):[])),this.posters$=this.listDetails$.pipe((0,l.Cc)(["results","backdrop_path"]),(0,c.U)(({results:t,backdrop_path:o})=>t?.map(g=>({...(0,D.z)(g,{pathProp:"backdrop_path",dims:O.J1,fallback:M.mw}),selected:g.backdrop_path===o})))),this.listName$=this.listDetails$.pipe((0,l.Ys)("name"),(0,m.O)("Loading...")),this.connect("id",this.routerListId$),this.hold(this.routerListId$,this.listState.fetchList),this.hold(this.listInfoUpdateEvent$,([t,o])=>this.listState.updateList({...t,id:+o})),this.hold(this.listPosterUpdateEvent$,([t,o])=>this.listState.updateList({backdrop_path:t,id:+o})),this.hold(this.listDeleteEvent$,([t,o])=>this.listState.deleteList(o))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function r(i){return(0,D.z)(i,{pathProp:"poster_path",dims:O.SU,sizes:"(min-width: 900px) 20vw, 70vw",srcset:"154w, 185w, 342w, 500w, 780w"})}},8377:(I,f,s)=>{s.d(f,{h:()=>D});var e=s(2285),L=s(4004),l=s(4482),c=s(5403),E=s(7272),m=s(4351),O=s(515),p=s(5026),v=s(6070),u=s(4235);function D(M,P,n={}){let d=0,r=2;const i=(0,u.U)(n).pipe((0,L.U)(a=>{const{page:t,total_pages:o,...g}=a;return d=t||d,r=o||r,{page:d,total_pages:r,...g}}),function h(M,P=!1){return(0,l.e)((n,d)=>{let r=0;n.subscribe((0,c.x)(d,i=>{const a=M(i,r++);(a||P)&&d.next(i),!a&&d.complete()}))})}(a=>!Array.isArray(a.results),!0));return(0,E.z)(i.pipe((0,v.Q)()),P.pipe((0,m.b)(()=>(++d,d<=r?M({page:d}).pipe((0,v.Q)()):O.E)))).pipe((0,p.R)((a,t)=>(t?.total_pages&&(r=t.total_pages),t?.results&&(a.results=(0,e.$T)(a?.results,t?.results||[]),delete t.results),(0,e.r$)(a,t)),{page:d,total_pages:r}))}},7679:(I,f,s)=>{s.d(f,{m:()=>P});var e=s(2223),L=s(5766),l=s(4004),c=s(9300),h=s(3900),E=s(1562),m=s(6917),O=s(1134),p=s(3144);let D=(()=>{class n{constructor(){this.http=(0,e.f3M)(p.eN),this.getAccountList=(r,i={})=>(i=function u(n){return{...(0,E.K)(n),...(0,O.C)(n)}}(i),this.http.get((n=>[m.n,"account",n,"lists"].join("/"))(r),{params:i}))}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=s(4755);let P=(()=>{class n extends L.x{constructor(){super(),this.platformId=(0,e.f3M)(e.Lbi),this.accountId$=this.select("accountId"),this.loggedIn$=this.select((0,l.U)(({accountId:i})=>null!==i)),this.accountLists$=this.select("lists");const r=(0,e.f3M)(D);(0,M.NF)(this.platformId)&&this.set({accountId:window.localStorage.getItem("accountId")}),this.connect("lists",this.accountId$.pipe((0,c.h)(i=>null!==i),(0,h.w)(i=>r.getAccountList(i).pipe((0,l.U)(({results:a})=>a)))))}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},6436:(I,f,s)=>{s.d(f,{V:()=>r});var e=s(2223),L=s(5766),l=s(6451),c=s(4351),h=s(8505),E=s(9300),m=s(4004),O=s(6917),p=s(3144);const v=[O.n,"list"].join("/"),u=i=>[v,i].join("/"),D=i=>[u(i),"items"].join("/");let M=(()=>{class i{constructor(){this.http=(0,e.f3M)(p.eN),this.createList=t=>this.http.post(v,t).pipe((0,m.U)(({id:o})=>o)),this.fetchList=t=>this.http.get(u(+t)).pipe((0,m.U)(o=>({[t]:o}))),this.updateList=t=>this.http.put(u(t.id||0),t),this.addMovieToList=t=>this.http.post(D(t.id),t),this.deleteMovieFromList=t=>this.http.delete(D(t.id),{body:t}),this.deleteList=t=>this.http.delete(u(+t))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var P=s(4639),n=s(2285),d=s(57);let r=(()=>{class i extends L.x{constructor(){(0,e.f3M)(e.ktI).onDestroy(()=>this.actionsF.destroy()),super(),this.router=(0,e.f3M)(P.F0),this.actionsF=new d.AE,this.listResource=(0,e.f3M)(M),this.actions=this.actionsF.create(),this.createList=this.actions.createList,this.fetchList=this.actions.fetchList,this.updateList=this.actions.updateList,this.addMovieToList=this.actions.addMovieToList,this.deleteMovieFromList=this.actions.deleteMovieFromList,this.deleteList=this.actions.deleteList,this.deleteListSignal$=this.actions.deleteList$,this.sideEffects$=(0,l.T)(this.actions.addMovieToList$.pipe((0,c.b)(([t,o])=>this.listResource.addMovieToList({id:o,items:[{media_id:t.id,media_type:"movie"}]}))),this.actions.deleteMovieFromList$.pipe((0,c.b)(([t,o])=>this.listResource.deleteMovieFromList({id:o,items:[{media_id:t.id||0,media_type:"movie"}]}))),this.actions.updateList$.pipe((0,c.b)(t=>this.listResource.updateList(t))),this.actions.createList$.pipe((0,c.b)(t=>this.listResource.createList(t)),(0,h.b)(t=>t&&this.router.navigate(["account/my-lists"]))),this.actions.deleteList$.pipe((0,h.b)(t=>t&&this.router.navigate(["account/my-lists"])),(0,c.b)(t=>this.listResource.deleteList(t)))),this.connect("lists",this.actions.fetchList$.pipe((0,E.h)(t=>!isNaN(Number(t))),(0,c.b)(t=>this.listResource.fetchList(t))),(t,o)=>(0,n.r$)(t?.lists||{},o)),this.connect("lists",this.actions.updateList$,(t,o)=>t&&o.id?(0,n.r$)(t.lists,{[o.id]:(0,n.r$)(t.lists[o.id],o)}):t.lists),this.connect("lists",this.actions.addMovieToList$,(t,[o,g])=>t&&g?(0,n.r$)(t.lists,{[g]:(0,n.r$)(t.lists[g],{results:[...t.lists[g].results||[],o]})}):t.lists),this.connect("lists",this.actions.deleteList$,(t,o)=>t&&o?(0,n.fL)(t.lists,`${o}`):t.lists),this.connect("lists",this.actions.deleteMovieFromList$,(t,[o,g])=>t&&g?(0,n.r$)(t.lists,{[g]:(0,n.r$)(t.lists[g],{results:(t.lists[g].results||[]).filter($=>$.id!==o.id)})}):t.lists),this.hold(this.sideEffects$)}initialize(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},9818:(I,f,s)=>{s.d(f,{K:()=>c});var e=s(2223);const L=[[["","detailGridMedia",""]],[["","detailGridDescription",""]]],l=["[detailGridMedia]","[detailGridDescription]"];let c=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["ui-detail-grid"]],standalone:!0,features:[e.jDz],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"grid--item","gradient"],[1,"grid--item","media"]],template:function(m,O){1&m&&(e.F$t(L),e.TgZ(0,"div",0),e.Hsn(1),e.qZA(),e.TgZ(2,"div",1),e.Hsn(3,1),e.qZA())},styles:['.gradient[_ngcontent-%COMP%]{position:relative}.gradient[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;display:inline-block;background-image:var(--background-blend-gradient)}[_nghost-%COMP%]{display:grid;grid-template-columns:40% 60%;max-width:120rem;margin:0 auto 7rem}@media only screen and (max-width: 900px){[_nghost-%COMP%]{display:block;grid-template-columns:unset;margin-bottom:5rem}}@media only screen and (max-width: 1300px){[_nghost-%COMP%]{max-width:110rem;margin-bottom:5rem}[_nghost-%COMP%]   .grid--item[_ngcontent-%COMP%]{padding:2rem}}@media only screen and (max-width: 1462.5px){[_nghost-%COMP%]{max-width:110rem;margin-bottom:6rem}}@media only screen and (max-width: 1500px){[_nghost-%COMP%]{max-width:105rem}}.grid--item[_ngcontent-%COMP%]{padding:4rem}'],changeDetection:0}),h})()},5797:(I,f,s)=>{s.d(f,{k:()=>L});const{isArray:e}=Array;function L(l){return 1===l.length&&e(l[0])?l[0]:l}}}]);