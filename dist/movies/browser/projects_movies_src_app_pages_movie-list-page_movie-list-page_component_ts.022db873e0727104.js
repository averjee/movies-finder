"use strict";(self.webpackChunkmovies=self.webpackChunkmovies||[]).push([["projects_movies_src_app_pages_movie-list-page_movie-list-page_component_ts"],{3404:(X,h,r)=>{r.r(h),r.d(h,{default:()=>N});var l=r(6424),s=r(2223),c=r(4004),g=r(5766),M=r(515),y=r(1365),C=r(1884),P=r(3900),v=r(2285),m=r(8e3),p=r(57),d=r(6070),u=r(5527),$=r(9674);let R=(()=>{class t extends g.x{constructor(){super(),this.actionsF=new p.AE,this.discoverResource=(0,s.f3M)(u.H),this.actions=this.actionsF.create({fetchDiscoverGenreMovies:String,fetchDiscoverCastMovies:String}),this.fetchDiscoverGenreMovies=this.actions.fetchDiscoverGenreMovies,this.genreMoviesByIdSlice=e=>this.select((0,c.U)(({genreMovies:{value:i,loading:o}})=>({loading:o,value:(0,$.j)(i,e)}))),(0,s.f3M)(s.ktI).onDestroy(()=>this.actionsF.destroy()),this.connect("genreMovies",this.actions.fetchDiscoverGenreMovies$.pipe((0,m.m)(e=>e,e=>this.discoverResource.getDiscoverMovies({with_genres:e,page:1}).pipe((0,c.U)(i=>({value:{[e]:i}})),(0,d.Q)()))),(e,i)=>{let o=(0,v.r$)(e?.genreMovies,i);return o.value=(0,v.r$)(e?.genreMovies?.value,o.value),o}),this.connect("personMovies",this.actions.fetchDiscoverCastMovies$.pipe((0,m.m)(e=>e,e=>this.discoverResource.getDiscoverMovies({with_cast:e,page:1}).pipe((0,c.U)(i=>({value:{[e]:i}})),(0,d.Q)()))),(e,i)=>{let o=(0,v.r$)(e?.personMovies,i);return o.value=(0,v.r$)(e?.personMovies?.value,o.value),o})}initialize(e){this.fetchDiscoverGenreMovies(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var D=r(7885),x=r(6459),L=r(8377),U=r(5203),F=r(6917),T=r(3144);const I=[F.w,"search","movie"].join("/");let A=(()=>{class t{constructor(){this.http=(0,s.f3M)(T.eN),this.getSearch=(e,i={})=>this.http.get(I,{params:{query:e,...i}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var z=r(7680),O=r(4463),Z=r(5088);const f=M.E;function E(t){return(0,Z.z)(t,{pathProp:"poster_path",dims:O.SU,sizes:"(min-width: 600px) 21vw, 15vw",srcset:"185w, 342w"})}let G=(()=>{class t extends g.x{getInitialFetchByType({type:e,identifier:i}){return"category"===e?this.movieState.categoryMoviesByIdCtx(i).pipe((0,c.U)(({loading:o,value:n})=>({loading:o,...n}))):"genre"===e?this.discoverState.genreMoviesByIdSlice(i).pipe((0,c.U)(({loading:o,value:n})=>({loading:o,...n}))):"search"===e?this.searchResource.getSearch(i):f}constructor(){super(),this.movieState=(0,s.f3M)(D.b),this.discoverState=(0,s.f3M)(R),this.routerState=(0,s.f3M)(x.u),this.discoverResource=(0,s.f3M)(u.H),this.movieResource=(0,s.f3M)(U.C),this.searchResource=(0,s.f3M)(A),this.genreResource=(0,s.f3M)(z.n),this.actions=(new p.AE).create(),this.movies$=this.select((0,c.U)(({results:i})=>i?.map(E))),this.paginate=this.actions.paginate,this.routerFetchEffect=({layout:i,type:o,identifier:n})=>{"list"===i&&"category"===o?this.movieState.fetchCategoryMovies(n):"list"===i&&"genre"===o&&this.discoverState.fetchDiscoverGenreMovies(n)};const e=this.actions.paginate$.pipe((0,y.M)(this.routerState.routerParams$),(0,c.U)(([i,o])=>o));this.connect("genres",this.genreResource.getGenresDictionaryCached()),this.connect(this.routerState.routerParams$.pipe((0,l.Cc)(["identifier","type"]))),this.connect(this.routerState.routerParams$.pipe(function S(t,a){return(0,C.x)((e,i)=>a?a(e[t],i[t]):e[t]===i[t])}("identifier"),(0,P.w)(({type:i,identifier:o})=>(0,L.h)(n=>function B(t,a,e,i){return"category"===t?a.getMovieCategory:"search"===t?i.getSearch:"genre"===t?(o,n)=>e.getDiscoverMovies({...n,with_genres:o}):(o,n)=>f}(i,this.movieResource,this.discoverResource,this.searchResource)(o,n),e,this.getInitialFetchByType({type:i,identifier:o}))))),this.hold(this.routerState.routerParams$,this.routerFetchEffect)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var H=r(4951),Q=r(6538),Y=r(6110);function j(t,a){if(1&t&&(s.TgZ(0,"header")(1,"h1",3),s._uU(2),s.qZA(),s.TgZ(3,"h2",4),s._uU(4),s.qZA()()),2&t){const e=a.$implicit;s.xp6(2),s.Oqu(e.main),s.xp6(2),s.Oqu(e.sub)}}function J(t,a){1&t&&s._UZ(0,"div",5)}const N=(()=>{class t{constructor(){this.adapter=(0,s.f3M)(G),this.movies$=this.adapter.movies$,this.loading$=this.adapter.select("loading"),this.headings$=this.adapter.select((0,l.Cc)(["identifier","type","genres"]),(0,c.U)(K)),this.adapter.set({loading:!0})}paginate(){this.adapter.paginate()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["ct-movies-list"]],standalone:!0,features:[s.jDz],decls:4,vars:3,consts:[[4,"rxLet"],[3,"movies","paginate"],["class","loader",4,"rxIf"],["data-uf","header-main"],["data-uf","header-sub"],[1,"loader"]],template:function(e,i){1&e&&(s.TgZ(0,"article"),s.YNc(1,j,5,2,"header",0),s.TgZ(2,"ui-movie-list",1),s.NdJ("paginate",function(){return i.paginate()}),s.qZA(),s.YNc(3,J,1,0,"div",2),s.qZA()),2&e&&(s.xp6(1),s.Q6J("rxLet",i.headings$),s.xp6(1),s.Q6J("movies",i.movies$),s.xp6(1),s.Q6J("rxIf",i.loading$))},dependencies:[H.e,Q.H7,Y.O],styles:['.loader[_ngcontent-%COMP%]{display:grid;place-items:center;min-width:150px;min-height:150px;width:100%}.loader[_ngcontent-%COMP%]:after{content:" ";width:3rem;height:3rem;border-radius:var(--theme-borderRadius-circle);background-color:var(--palette-primary-dark);box-shadow:-5rem 0 0 var(--palette-primary-main);animation:_ngcontent-%COMP%_circle-classic 1s ease-in-out infinite alternate}.loader.center-v[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@keyframes _ngcontent-%COMP%_circle-classic{0%{opacity:.1;transform:rotate(0) scale(.5)}to{opacity:1;transform:rotate(360deg) scale(1.2)}}[_nghost-%COMP%]{width:100%}'],changeDetection:0}),t})();function K(t){const{identifier:a,type:e,genres:i}=t;let o=a;const n=e;return"genre"===e&&(o=i[parseInt(a)].name),o=o.replace(/[-_]/," "),{main:o,sub:n}}}}]);