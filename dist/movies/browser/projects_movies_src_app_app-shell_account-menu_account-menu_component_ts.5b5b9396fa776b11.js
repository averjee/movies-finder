"use strict";(self.webpackChunkmovies=self.webpackChunkmovies||[]).push([["projects_movies_src_app_app-shell_account-menu_account-menu_component_ts"],{1450:(U,x,s)=>{s.r(x),s.d(x,{default:()=>y,imports:()=>a});var M=s(4951),i=s(5766),t=s(2223),p=s(4755),I=s(6917),E=s(3144);const f=[I.n,"auth"].join("/"),C=[f,"request_token"].join("/"),v=[f,"access_token"].join("/");let h=(()=>{class r{constructor(){this.http=(0,t.f3M)(E.eN),this.createRequestToken=n=>this.http.post(C,{redirect_to:n}),this.createAccessToken=n=>this.http.post(v,{request_token:n}),this.deleteAccessToken=n=>this.http.delete(v,{body:{access_token:n}})}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var P=s(7777),g=s(7679);let O=(()=>{class r{constructor(){if(this.document=(0,t.f3M)(p.K0),this.platformId=(0,t.f3M)(t.Lbi),this.authResource=(0,t.f3M)(h),this.accessTokenFacade=(0,t.f3M)(P.P),this.accountState=(0,t.f3M)(g.m),this.redirectUrl=`${this.document.location.protocol}//${this.document.location.hostname}:${this.document.location.port}/list/category/popular`,this.signInStart=()=>{this.authResource.createRequestToken(this.redirectUrl).subscribe(({request_token:n})=>{(0,p.NF)(this.platformId)&&window.localStorage.setItem("requestToken",n),this.document.location.replace(`https://www.themoviedb.org/auth/access?request_token=${n}`)})},this.signInFinish=n=>{this.authResource.createAccessToken(n).subscribe(({access_token:d,account_id:u})=>{(0,p.NF)(this.platformId)&&(window.localStorage.removeItem("requestToken"),window.localStorage.setItem("accountId",u),this.accountState.set({accountId:u}),window.localStorage.setItem("accessToken",d),this.accessTokenFacade.setUserAccessToken(d))})},this.signOut=()=>{const n=window.localStorage.getItem("accessToken");n&&this.authResource.deleteAccessToken(n).subscribe(),window.localStorage.clear(),this.accountState.set({accountId:null}),this.accessTokenFacade.resetToReadAccessToken()},(0,p.NF)(this.platformId)){const n=window.localStorage.getItem("requestToken");n&&this.signInFinish(n)}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var c=s(4639),m=s(5048),_=s(6538),D=s(57);const R=function(){return["account/list/create"]},o=function(){return["account/my-lists"]};function T(r,l){if(1&r){const n=t.EpF();t.ynx(0),t.TgZ(1,"div")(2,"a",2),t._uU(3,"Create New List"),t.qZA()(),t.TgZ(4,"div")(5,"a",2),t._uU(6,"My Lists"),t.qZA()(),t.TgZ(7,"div")(8,"a",3),t.NdJ("click",function(u){t.CHM(n);const A=t.oxw();return t.KtG(A.ui.signOut(u))}),t._uU(9," Logout "),t.qZA()(),t.BQk()}2&r&&(t.xp6(2),t.Q6J("routerLink",t.DdM(3,R)),t.xp6(3),t.Q6J("routerLink",t.DdM(4,o)),t.xp6(3),t.Q6J("routerLink","/list/category/popular"))}function e(r,l){if(1&r){const n=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"Guest Profile"),t.qZA()(),t.TgZ(3,"div")(4,"a",4),t.NdJ("click",function(u){t.CHM(n);const A=t.oxw();return t.KtG(A.ui.signIn(u))}),t._uU(5,"Login"),t.qZA()()}}const a=[c.rH,M.e,_.H7],y=(()=>{class r{constructor(n){this.actionsF=n,this.effects=(0,t.f3M)(m.G),this.authEffects=(0,t.f3M)(O),this.accountState=(0,t.f3M)(g.m),this.state=(0,t.f3M)(i.x),this.ui=this.actionsF.create(),this.loggedIn$=this.state.select("loggedIn"),this.state.connect("loggedIn",this.accountState.loggedIn$),this.effects.register(this.ui.signOut$,this.authEffects.signOut),this.effects.register(this.ui.signIn$,this.authEffects.signInStart)}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(D.AE))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ct-account-menu"]],standalone:!0,features:[t._Bn([i.x,m.G]),t.jDz],decls:3,vars:2,consts:[[4,"rxIf","rxIfElse"],["guest",""],[3,"routerLink"],["data-uf","profile-menu-item-signout","title","sign out",3,"routerLink","click"],["data-uf","profile-menu-item-login","title","sign in",3,"click"]],template:function(n,d){if(1&n&&(t.YNc(0,T,10,5,"ng-container",0),t.YNc(1,e,6,0,"ng-template",null,1,t.W1O)),2&n){const u=t.MAs(2);t.Q6J("rxIf",d.loggedIn$)("rxIfElse",u)}},dependencies:[c.rH,_.H7],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}div[_ngcontent-%COMP%]{font-size:var(--text-md);padding:0;cursor:pointer;display:flex;align-items:center;color:var(--palette-text-primary);height:36px;background-color:var(--palette-background-paper);transition:background-color .15s cubic-bezier(.4,0,.2,1) 0s}div[_ngcontent-%COMP%]:hover{background-color:var(--palette-action-hover)}div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--palette-text-primary);height:100%;display:inline-block;width:100%;padding:6px 16px}div[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--palette-divider)}a[_ngcontent-%COMP%]{font-size:var(--text-md)}"],changeDetection:0}),r})()},6538:(U,x,s)=>{s.d(x,{H7:()=>m,qn:()=>R});var M=s(3479),i=s(2223),t=s(9373),p=s(3588),I=s(6770),E=s(727),f=s(4707),C=s(7579),v=s(6451),h=s(1848),P=s(8189),g=s(4004),O=s(9300);const c={...M.yy,then:"rxThen",else:"rxElse"};let m=(()=>{class o{constructor(e,a,S,y,r){this.strategyProvider=e,this.cdRef=a,this.ngZone=S,this.templateRef=y,this.viewContainerRef=r,this.subscription=new E.w0,this.renderParent=this.strategyProvider.config.parent,this.patchZone=this.strategyProvider.config.patchZone,this.triggerHandler=new f.t(1),this.templateNotifier=(0,p.bF)(),this.strategyHandler=(0,t.Sp)(()=>new f.t(1),(0,P.J)()),this.rendered$=new C.x}set strategy(e){this.strategyHandler.next(e)}set renderCallback(e){this._renderObserver=e}get thenTemplate(){return this.then?this.then:this.templateRef}ngOnInit(){this.subscription.add((0,v.T)(this.contextTrigger||h.C,this.nextTrigger?.pipe((0,g.U)(()=>"next"))||h.C,this.suspenseTrigger?.pipe((0,g.U)(()=>"suspense"))||h.C,this.completeTrigger?.pipe((0,g.U)(()=>"complete"))||h.C,this.errorTrigger?.pipe((0,g.U)(()=>"error"))||h.C).pipe((0,O.h)(e=>!!e)).subscribe(e=>this.triggerHandler.next(e))),this.subscription.add(this.templateManager.render(this.templateNotifier.values$).subscribe(e=>{this.rendered$.next(e),this._renderObserver?.next(e)}))}ngOnChanges(e){this.templateManager||this._createTemplateManager(),e.then&&!e.then.firstChange&&this.templateManager.addTemplateRef(c.then,this.thenTemplate),e.else&&this.templateManager.addTemplateRef(c.else,this.else),e.complete&&this.templateManager.addTemplateRef(c.complete,this.complete),e.suspense&&(this.templateManager.addTemplateRef(c.suspense,this.suspense),this.templateNotifier.withInitialSuspense(!!this.suspense)),e.error&&this.templateManager.addTemplateRef(c.error,this.error),e.rxIf&&this.templateNotifier.next(this.rxIf)}ngOnDestroy(){this.subscription.unsubscribe()}_createTemplateManager(){const e=a=>a?c.then:this.else?c.else:void 0;this.templateManager=(0,M.t4)({templateSettings:{viewContainerRef:this.viewContainerRef,customContext:a=>({rxIf:a})},renderSettings:{cdRef:this.cdRef,parent:_(this.renderParent),patchZone:!!this.patchZone&&this.ngZone,defaultStrategyName:this.strategyProvider.primaryStrategy,strategies:this.strategyProvider.strategies},notificationToTemplateName:{suspense:a=>this.suspense?c.suspense:e(a),next:a=>e(a),error:a=>this.error?c.error:e(a),complete:a=>this.complete?c.complete:e(a)},templateTrigger$:this.triggerHandler}),this.templateManager.addTemplateRef(c.then,this.thenTemplate),this.templateManager.nextStrategy(this.strategyHandler.values$)}static ngTemplateContextGuard(e,a){return!0}}return o.\u0275fac=function(e){return new(e||o)(i.Y36(I.$Y),i.Y36(i.sBO),i.Y36(i.R0b),i.Y36(i.Rgc),i.Y36(i.s_b))},o.\u0275dir=i.lG2({type:o,selectors:[["","rxIf",""]],inputs:{rxIf:"rxIf",strategy:["rxIfStrategy","strategy"],else:["rxIfElse","else"],then:["rxIfThen","then"],suspense:["rxIfSuspense","suspense"],complete:["rxIfComplete","complete"],error:["rxIfError","error"],contextTrigger:["rxIfContextTrigger","contextTrigger"],nextTrigger:["rxIfNextTrigger","nextTrigger"],suspenseTrigger:["rxIfSuspenseTrigger","suspenseTrigger"],errorTrigger:["rxIfErrorTrigger","errorTrigger"],completeTrigger:["rxIfCompleteTrigger","completeTrigger"],renderParent:["rxIfParent","renderParent"],patchZone:["rxIfPatchZone","patchZone"],renderCallback:["rxIfRenderCallback","renderCallback"]},standalone:!0,features:[i.TTD]}),o})();function _(o){return null!=o&&"false"!=`${o}`}let R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({}),o})()}}]);